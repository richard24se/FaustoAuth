upstream app_server{
  server hostname_app:port_app fail_timeout=0;
}

server {
  listen port_app;
  server_name _;
  root  /usr/share/nginx/html;
  
  default_type  application/octet-stream;
  
  location / {
      
      # include /etc/nginx/mime.types;
      # try_files $uri $uri/ /index.html;
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header Host $host;
      proxy_redirect off;
      proxy_pass http://app_server;
      proxy_read_timeout 38400;
  }
  # Media: images, icons, video, audio, HTC
  location ~* \.(?:jpg|jpeg|gif|png|ico|cur|gz|svg|svgz|mp4|ogg|ogv|webm|htc)$ {
      expires 1M;
      access_log off;
      add_header Cache-Control "public";
  }

  # Javascript and CSS files
  location ~* \.(?:css|js)$ {
    #   try_files $uri =404;
      expires 7d;
      access_log off;
      add_header Cache-Control "public";
  }

#   # Any route containing a file extension (e.g. /devicesfile.js)
#   location ~ ^.+\..+$ {
#       try_files $uri =404;
#   }
}
